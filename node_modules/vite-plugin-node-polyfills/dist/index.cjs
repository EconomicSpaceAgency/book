"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const _=require("node:fs"),y=require("node:module"),B=require("@rollup/plugin-inject"),S=require("node-stdlib-browser"),q=require("node-stdlib-browser/helpers/rollup/plugin"),P=require("node-stdlib-browser/helpers/esbuild/plugin"),a=e=>e&&e.__esModule?e:{default:e},j=a(B),R=a(S),$=a(P),d=e=>e?e===!0?!0:e==="build":!1,u=e=>e?e===!0?!0:e==="dev":!1,w=e=>e.startsWith("node:"),x=(e={})=>{const c=y.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href),n=c.resolve("vite-plugin-node-polyfills/shims"),m=c.resolve("vite-plugin-node-polyfills/shims/banner"),p=_.readFileSync(m,"utf-8"),r={include:[],exclude:[],protocolImports:!0,...e,globals:{Buffer:!0,global:!0,process:!0,...e.globals}},b=(l,o)=>l===o||l===`node:${o}`,h=l=>r.include.length?!r.include.some(o=>b(l,o)):r.exclude.some(o=>b(l,o)),v=l=>{if(u(r.globals.Buffer)&&/^(?:node:)?buffer$/.test(l))return c.resolve("buffer-polyfill")};return{name:"vite-plugin-node-polyfills",config:(l,o)=>{const i=o.mode==="development",g=Object.entries(R.default).reduce((t,[s,f])=>(!r.protocolImports&&w(s)||h(s)||(t[s]=v(s)||f),t),{});return{build:{rollupOptions:{onwarn:(t,s)=>{q.handleCircularDependancyWarning(t,s)},plugins:[{...j.default({...d(r.globals.Buffer)?{Buffer:[n,"Buffer"]}:{},...d(r.globals.global)?{global:[n,"global"]}:{},...d(r.globals.process)?{process:[n,"process"]}:{}})}]}},esbuild:{banner:i?p:void 0},optimizeDeps:{esbuildOptions:{banner:i?{js:p}:void 0,define:{...i&&u(r.globals.Buffer)?{Buffer:"Buffer"}:{},...i&&u(r.globals.global)?{global:"global"}:{},...i&&u(r.globals.process)?{process:"process"}:{}},inject:[n],plugins:[$.default(g),{name:"vite-plugin-node-polyfills-shims-resolver",setup(t){const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),f=new RegExp(`^${s}$`);t.onResolve({filter:f},()=>({external:!1,path:n}))}}]}},resolve:{alias:{...g}}}}}};exports.nodePolyfills=x;
//# sourceMappingURL=index.cjs.map

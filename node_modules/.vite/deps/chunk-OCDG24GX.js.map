{
  "version": 3,
  "sources": ["../../@web3-onboard/magic/dist/index-491155c1.js"],
  "sourcesContent": ["import Joi from 'joi';\n\nconst userEmail = Joi.string()\n    .email({ tlds: { allow: false } })\n    .allow(null);\nconst magicOptions = Joi.object({\n    apiKey: Joi.string().required(),\n    userEmail: userEmail\n});\nconst validate = (validator, data) => {\n    const result = validator.validate(data);\n    return result.error ? result : null;\n};\nconst validateMagicInitOptions = (data) => {\n    return validate(magicOptions, data);\n};\nconst validateUserEmail = (email) => {\n    return validate(userEmail, email);\n};\n\nfunction magic(options) {\n    if (options) {\n        const error = validateMagicInitOptions(options);\n        if (error) {\n            throw error;\n        }\n    }\n    const { apiKey, userEmail } = options;\n    const walletName = 'Magic Wallet';\n    return () => {\n        return {\n            label: walletName,\n            getIcon: async () => (await import('./icon-87babf0a.js')).default,\n            getInterface: async ({ EventEmitter, BigNumber, chains }) => {\n                const { Magic, RPCErrorCode } = await import('magic-sdk');\n                const loginModal = (await import('./login-modal-c661232c.js')).default;\n                const brandingHTML = (await import('./branding-111ba967.js')).default;\n                const { createEIP1193Provider, ProviderRpcErrorCode, ProviderRpcError } = await import('@web3-onboard/common');\n                const emitter = new EventEmitter();\n                if (!chains.length)\n                    throw new Error('At least one Chain must be passed to onboard in order to connect');\n                let currentChain = chains[0];\n                let customNodeOptions = {\n                    chainId: parseInt(currentChain.id),\n                    rpcUrl: currentChain.rpcUrl\n                };\n                let magicInstance = new Magic(apiKey, {\n                    network: customNodeOptions\n                });\n                let loggedIn;\n                const loginWithEmail = async (emailAddress) => {\n                    try {\n                        await magicInstance.auth.loginWithMagicLink({ email: emailAddress });\n                        return await magicInstance.user.isLoggedIn();\n                    }\n                    catch (err) {\n                        throw new Error(`An error occurred while connecting your Magic wallet, please try again: ${err}`);\n                    }\n                };\n                const handleLogin = async () => {\n                    loggedIn = await loginModal({\n                        walletName: walletName,\n                        brandingHTMLString: brandingHTML,\n                        emailLoginFunction: loginWithEmail\n                    });\n                };\n                let magicProvider = magicInstance.rpcProvider;\n                let provider;\n                let activeAddress;\n                function patchProvider() {\n                    const patchedProvider = createEIP1193Provider(magicProvider, {\n                        eth_requestAccounts: async ({ baseRequest }) => {\n                            try {\n                                if (userEmail)\n                                    loggedIn = await loginWithEmail(userEmail);\n                                if (!loggedIn)\n                                    await handleLogin();\n                                const accounts = await baseRequest({ method: 'eth_accounts' });\n                                activeAddress = accounts[0];\n                                return accounts;\n                            }\n                            catch (error) {\n                                const { code } = error;\n                                if (code === RPCErrorCode.InternalError) {\n                                    throw new ProviderRpcError({\n                                        code: ProviderRpcErrorCode.ACCOUNT_ACCESS_REJECTED,\n                                        message: 'Account access rejected'\n                                    });\n                                }\n                                return [];\n                            }\n                        },\n                        eth_selectAccounts: null,\n                        eth_getBalance: async ({ baseRequest }) => {\n                            const balance = await baseRequest({\n                                method: 'eth_getBalance',\n                                params: [activeAddress, 'latest']\n                            });\n                            return balance\n                                ? BigNumber.from(balance).mul('1000000000000000000').toString()\n                                : '0';\n                        },\n                        wallet_switchEthereumChain: async ({ params }) => {\n                            const chain = chains.find(({ id }) => id === params[0].chainId);\n                            if (!chain)\n                                throw new Error('Chain must be set before switching');\n                            currentChain = chain;\n                            // re-instantiate instance with new network\n                            customNodeOptions = {\n                                chainId: parseInt(currentChain.id),\n                                rpcUrl: currentChain.rpcUrl\n                            };\n                            magicInstance = new Magic(apiKey, {\n                                network: customNodeOptions\n                            });\n                            magicProvider = magicInstance.rpcProvider;\n                            emitter.emit('chainChanged', currentChain.id);\n                            patchProvider();\n                            return null;\n                        },\n                        eth_sign: async ({ params }) => {\n                            const receipt = await magicProvider.send('eth_sign', params);\n                            return receipt &&\n                                receipt.hasOwnProperty('tx') &&\n                                receipt.tx.hasOwnProperty('hash')\n                                ? receipt.tx.hash\n                                : '';\n                        },\n                        eth_signTypedData: async ({ params }) => {\n                            const receipt = await magicProvider.send('eth_sign', params);\n                            return receipt &&\n                                receipt.hasOwnProperty('tx') &&\n                                receipt.tx.hasOwnProperty('hash')\n                                ? receipt.tx.hash\n                                : '';\n                        },\n                        eth_chainId: async () => currentChain && currentChain.hasOwnProperty('id')\n                            ? currentChain.id\n                            : '0x1',\n                        eth_signTransaction: async ({ params: [transactionObject] }) => {\n                            let destination;\n                            if (transactionObject.hasOwnProperty('to')) {\n                                destination = transactionObject.to;\n                            }\n                            const receipt = await magicProvider.send('eth_signTransaction', [\n                                {\n                                    ...transactionObject,\n                                    nonce: transactionObject.hasOwnProperty('nonce') &&\n                                        typeof transactionObject.nonce === 'number'\n                                        ? parseInt(transactionObject.nonce)\n                                        : '',\n                                    from: activeAddress,\n                                    to: destination\n                                }\n                            ]);\n                            return receipt &&\n                                receipt.hasOwnProperty('tx') &&\n                                receipt.tx.hasOwnProperty('hash')\n                                ? receipt.tx.hash\n                                : '';\n                        }\n                    });\n                    if (!provider) {\n                        patchedProvider.on = emitter.on.bind(emitter);\n                        patchedProvider.disconnect = () => magicInstance.user.logout();\n                        return patchedProvider;\n                    }\n                    else {\n                        provider.request = patchedProvider.request.bind(patchedProvider);\n                        // @ts-ignore - bind old methods for backwards compat\n                        provider.send = patchedProvider.send.bind(patchedProvider);\n                        // @ts-ignore - bind old methods for backwards compat\n                        provider.sendAsync = patchedProvider.sendAsync.bind(patchedProvider);\n                        return provider;\n                    }\n                }\n                provider = patchProvider();\n                return {\n                    provider,\n                    instance: magicInstance\n                };\n            }\n        };\n    };\n}\n\nexport { magic as m, validateUserEmail as v };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "names": ["Joi", "userEmail"]
}

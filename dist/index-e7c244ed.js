import{d as pe}from"./provider-jsonrpc-62e4dd44.js";import"./contract-1c37cfa4.js";var ge=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(ge||{}),tt=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(tt||{}),vt=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(vt||{}),H=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e))(H||{}),Oe=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(Oe||{}),Ye=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ye||{}),pn=(e=>(e.Harmony="HARMONY",e))(pn||{}),vn=Object.create,De=Object.defineProperty,mn=Object.defineProperties,yn=Object.getOwnPropertyDescriptor,gn=Object.getOwnPropertyDescriptors,En=Object.getOwnPropertyNames,Bt=Object.getOwnPropertySymbols,_n=Object.getPrototypeOf,nr=Object.prototype.hasOwnProperty,In=Object.prototype.propertyIsEnumerable,Gt=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,or=(e,t)=>{for(var n in t||(t={}))nr.call(t,n)&&Gt(e,n,t[n]);if(Bt)for(var n of Bt(t))In.call(t,n)&&Gt(e,n,t[n]);return e},bn=(e,t)=>mn(e,gn(t)),wn=e=>De(e,"__esModule",{value:!0}),On=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Nn=(e,t)=>{for(var n in t)De(e,n,{get:t[n],enumerable:!0})},Rn=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of En(t))!nr.call(e,u)&&(n||u!=="default")&&De(e,u,{get:()=>t[u],enumerable:!(a=yn(t,u))||a.enumerable});return e},Sn=(e,t)=>Rn(wn(De(e!=null?vn(_n(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),le=(e,t,n)=>new Promise((a,u)=>{var s=I=>{try{p(n.next(I))}catch(m){u(m)}},y=I=>{try{p(n.throw(I))}catch(m){u(m)}},p=I=>I.done?a(I.value):Promise.resolve(I.value).then(s,y);p((n=n.apply(e,t)).next())}),An=On((e,t)=>{var n=Object.prototype.hasOwnProperty,a="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(a=!1));function s(m,g,d){this.fn=m,this.context=g,this.once=d||!1}function y(m,g,d,S,j){if(typeof d!="function")throw new TypeError("The listener must be a function");var P=new s(d,S||m,j),x=a?a+g:g;return m._events[x]?m._events[x].fn?m._events[x]=[m._events[x],P]:m._events[x].push(P):(m._events[x]=P,m._eventsCount++),m}function p(m,g){--m._eventsCount===0?m._events=new u:delete m._events[g]}function I(){this._events=new u,this._eventsCount=0}I.prototype.eventNames=function(){var m=[],g,d;if(this._eventsCount===0)return m;for(d in g=this._events)n.call(g,d)&&m.push(a?d.slice(1):d);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},I.prototype.listeners=function(m){var g=a?a+m:m,d=this._events[g];if(!d)return[];if(d.fn)return[d.fn];for(var S=0,j=d.length,P=new Array(j);S<j;S++)P[S]=d[S].fn;return P},I.prototype.listenerCount=function(m){var g=a?a+m:m,d=this._events[g];return d?d.fn?1:d.length:0},I.prototype.emit=function(m,g,d,S,j,P){var x=a?a+m:m;if(!this._events[x])return!1;var A=this._events[x],V=arguments.length,G,W;if(A.fn){switch(A.once&&this.removeListener(m,A.fn,void 0,!0),V){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,g),!0;case 3:return A.fn.call(A.context,g,d),!0;case 4:return A.fn.call(A.context,g,d,S),!0;case 5:return A.fn.call(A.context,g,d,S,j),!0;case 6:return A.fn.call(A.context,g,d,S,j,P),!0}for(W=1,G=new Array(V-1);W<V;W++)G[W-1]=arguments[W];A.fn.apply(A.context,G)}else{var ue=A.length,N;for(W=0;W<ue;W++)switch(A[W].once&&this.removeListener(m,A[W].fn,void 0,!0),V){case 1:A[W].fn.call(A[W].context);break;case 2:A[W].fn.call(A[W].context,g);break;case 3:A[W].fn.call(A[W].context,g,d);break;case 4:A[W].fn.call(A[W].context,g,d,S);break;default:if(!G)for(N=1,G=new Array(V-1);N<V;N++)G[N-1]=arguments[N];A[W].fn.apply(A[W].context,G)}}return!0},I.prototype.on=function(m,g,d){return y(this,m,g,d,!1)},I.prototype.once=function(m,g,d){return y(this,m,g,d,!0)},I.prototype.removeListener=function(m,g,d,S){var j=a?a+m:m;if(!this._events[j])return this;if(!g)return p(this,j),this;var P=this._events[j];if(P.fn)P.fn===g&&(!S||P.once)&&(!d||P.context===d)&&p(this,j);else{for(var x=0,A=[],V=P.length;x<V;x++)(P[x].fn!==g||S&&!P[x].once||d&&P[x].context!==d)&&A.push(P[x]);A.length?this._events[j]=A.length===1?A[0]:A:p(this,j)}return this},I.prototype.removeAllListeners=function(m){var g;return m?(g=a?a+m:m,this._events[g]&&p(this,g)):(this._events=new u,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=a,I.EventEmitter=I,typeof t<"u"&&(t.exports=I)});function Ln(e){let t={exports:{}};return e(t,t.exports),t.exports}var Tn=Number.MAX_SAFE_INTEGER||9007199254740991,mt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Tn,MAX_SAFE_COMPONENT_LENGTH:16},$n=typeof pe.process=="object"&&pe.process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},B=$n,ke=Ln(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=mt,a=(t=e.exports={}).re=[],u=t.src=[],s=t.t={},y=0,p=(I,m,g)=>{let d=y++;B(d,m),s[I]=d,u[d]=m,a[d]=new RegExp(m,g?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","[0-9]+"),p("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),p("MAINVERSION",`(${u[s.NUMERICIDENTIFIER]})\\.(${u[s.NUMERICIDENTIFIER]})\\.(${u[s.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[s.NUMERICIDENTIFIERLOOSE]})\\.(${u[s.NUMERICIDENTIFIERLOOSE]})\\.(${u[s.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[s.NUMERICIDENTIFIER]}|${u[s.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[s.NUMERICIDENTIFIERLOOSE]}|${u[s.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[s.PRERELEASEIDENTIFIER]}(?:\\.${u[s.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[s.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER","[0-9A-Za-z-]+"),p("BUILD",`(?:\\+(${u[s.BUILDIDENTIFIER]}(?:\\.${u[s.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[s.MAINVERSION]}${u[s.PRERELEASE]}?${u[s.BUILD]}?`),p("FULL",`^${u[s.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[s.MAINVERSIONLOOSE]}${u[s.PRERELEASELOOSE]}?${u[s.BUILD]}?`),p("LOOSE",`^${u[s.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[s.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[s.XRANGEIDENTIFIER]})(?:\\.(${u[s.XRANGEIDENTIFIER]})(?:\\.(${u[s.XRANGEIDENTIFIER]})(?:${u[s.PRERELEASE]})?${u[s.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[s.XRANGEIDENTIFIERLOOSE]})(?:${u[s.PRERELEASELOOSE]})?${u[s.BUILD]}?)?)?`),p("XRANGE",`^${u[s.GTLT]}\\s*${u[s.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[s.GTLT]}\\s*${u[s.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[s.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[s.LONETILDE]}${u[s.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[s.LONETILDE]}${u[s.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[s.LONECARET]}${u[s.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[s.LONECARET]}${u[s.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[s.GTLT]}\\s*(${u[s.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[s.GTLT]}\\s*(${u[s.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[s.GTLT]}\\s*(${u[s.LOOSEPLAIN]}|${u[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[s.XRANGEPLAIN]})\\s+-\\s+(${u[s.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[s.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0.0.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Wt=/^[0-9]+$/,ir=(e,t)=>{let n=Wt.test(e),a=Wt.test(t);return n&&a&&(e=+e,t=+t),e===t?0:n&&!a?-1:a&&!n?1:e<t?-1:1},Mn=(e,t)=>ir(t,e),Pn={compareIdentifiers:ir,rcompareIdentifiers:Mn},{MAX_LENGTH:qt,MAX_SAFE_INTEGER:Be}=mt,{re:zt,t:Ht}=ke,{compareIdentifiers:Te}=Pn,Q=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Q){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>qt)throw new TypeError(`version is longer than ${qt} characters`);B("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?zt[Ht.LOOSE]:zt[Ht.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Be||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Be||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Be||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let u=+a;if(u>=0&&u<Be)return u}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(B("SemVer.compare",this.version,this.options,e),!(e instanceof Q)){if(typeof e=="string"&&e===this.version)return 0;e=new Q(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Q||(e=new Q(e,this.options)),Te(this.major,e.major)||Te(this.minor,e.minor)||Te(this.patch,e.patch)}comparePre(e){if(e instanceof Q||(e=new Q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],a=e.prerelease[t];if(B("prerelease compare",t,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n!==a)return Te(n,a)}while(++t)}compareBuild(e){e instanceof Q||(e=new Q(e,this.options));let t=0;do{let n=this.build[t],a=e.build[t];if(B("prerelease compare",t,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n!==a)return Te(n,a)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},jn=(e,t,n)=>new Q(e,n).compare(new Q(t,n)),Re=jn,Cn=(e,t,n)=>Re(e,t,n)===0,Dn=Cn,kn=(e,t,n)=>Re(e,t,n)!==0,xn=kn,Un=(e,t,n)=>Re(e,t,n)>0,Fn=Un,Bn=(e,t,n)=>Re(e,t,n)>=0,Gn=Bn,Wn=(e,t,n)=>Re(e,t,n)<0,qn=Wn,zn=(e,t,n)=>Re(e,t,n)<=0,Hn=zn,Xn=(e,t,n,a)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Dn(e,n,a);case"!=":return xn(e,n,a);case">":return Fn(e,n,a);case">=":return Gn(e,n,a);case"<":return qn(e,n,a);case"<=":return Hn(e,n,a);default:throw new TypeError(`Invalid operator: ${t}`)}},ft=Xn,$e=Symbol("SemVer ANY"),je=class{static get ANY(){return $e}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof je){if(e.loose===!!t.loose)return e;e=e.value}B("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===$e?this.value="":this.value=this.operator+this.semver.version,B("comp",this)}parse(e){let t=this.options.loose?Xt[Vt.COMPARATORLOOSE]:Xt[Vt.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Q(n[2],this.options.loose):this.semver=$e}toString(){return this.value}test(e){if(B("Comparator.test",e,this.options.loose),this.semver===$e||e===$e)return!0;if(typeof e=="string")try{e=new Q(e,this.options)}catch{return!1}return ft(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof je))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ne(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ne(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),a=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),u=this.semver.version===e.semver.version,s=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),y=ft(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),p=ft(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||a||u&&s||y||p}},{re:Xt,t:Vt}=ke,Ne=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ne)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ne(e.raw,t);if(e instanceof je)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?te[Z.HYPHENRANGELOOSE]:te[Z.HYPHENRANGE];e=e.replace(n,ao(this.options.includePrerelease)),B("hyphen replace",e),e=e.replace(te[Z.COMPARATORTRIM],Vn),B("comparator trim",e,te[Z.COMPARATORTRIM]),e=(e=(e=e.replace(te[Z.TILDETRIM],Yn)).replace(te[Z.CARETTRIM],Kn)).split(/\s+/).join(" ");let a=t?te[Z.COMPARATORLOOSE]:te[Z.COMPARATOR];return e.split(" ").map(u=>Jn(u,this.options)).join(" ").split(/\s+/).map(u=>io(u,this.options)).filter(this.options.loose?u=>!!u.match(a):()=>!0).map(u=>new je(u,this.options))}intersects(e,t){if(!(e instanceof Ne))throw new TypeError("a Range is required");return this.set.some(n=>Yt(n,t)&&e.set.some(a=>Yt(a,t)&&n.every(u=>a.every(s=>u.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Q(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(so(this.set[t],e,this.options))return!0;return!1}},{re:te,t:Z,comparatorTrimReplace:Vn,tildeTrimReplace:Yn,caretTrimReplace:Kn}=ke,Yt=(e,t)=>{let n=!0,a=e.slice(),u=a.pop();for(;n&&a.length;)n=a.every(s=>u.intersects(s,t)),u=a.pop();return n},Jn=(e,t)=>(B("comp",e,t),e=eo(e,t),B("caret",e),e=Qn(e,t),B("tildes",e),e=ro(e,t),B("xrange",e),e=oo(e,t),B("stars",e),e),oe=e=>!e||e.toLowerCase()==="x"||e==="*",Qn=(e,t)=>e.trim().split(/\s+/).map(n=>Zn(n,t)).join(" "),Zn=(e,t)=>{let n=t.loose?te[Z.TILDELOOSE]:te[Z.TILDE];return e.replace(n,(a,u,s,y,p)=>{let I;return B("tilde",e,a,u,s,y,p),oe(u)?I="":oe(s)?I=`>=${u}.0.0 <${+u+1}.0.0-0`:oe(y)?I=`>=${u}.${s}.0 <${u}.${+s+1}.0-0`:p?(B("replaceTilde pr",p),I=`>=${u}.${s}.${y}-${p} <${u}.${+s+1}.0-0`):I=`>=${u}.${s}.${y} <${u}.${+s+1}.0-0`,B("tilde return",I),I})},eo=(e,t)=>e.trim().split(/\s+/).map(n=>to(n,t)).join(" "),to=(e,t)=>{B("caret",e,t);let n=t.loose?te[Z.CARETLOOSE]:te[Z.CARET],a=t.includePrerelease?"-0":"";return e.replace(n,(u,s,y,p,I)=>{let m;return B("caret",e,u,s,y,p,I),oe(s)?m="":oe(y)?m=`>=${s}.0.0${a} <${+s+1}.0.0-0`:oe(p)?m=s==="0"?`>=${s}.${y}.0${a} <${s}.${+y+1}.0-0`:`>=${s}.${y}.0${a} <${+s+1}.0.0-0`:I?(B("replaceCaret pr",I),m=s==="0"?y==="0"?`>=${s}.${y}.${p}-${I} <${s}.${y}.${+p+1}-0`:`>=${s}.${y}.${p}-${I} <${s}.${+y+1}.0-0`:`>=${s}.${y}.${p}-${I} <${+s+1}.0.0-0`):(B("no pr"),m=s==="0"?y==="0"?`>=${s}.${y}.${p}${a} <${s}.${y}.${+p+1}-0`:`>=${s}.${y}.${p}${a} <${s}.${+y+1}.0-0`:`>=${s}.${y}.${p} <${+s+1}.0.0-0`),B("caret return",m),m})},ro=(e,t)=>(B("replaceXRanges",e,t),e.split(/\s+/).map(n=>no(n,t)).join(" ")),no=(e,t)=>{e=e.trim();let n=t.loose?te[Z.XRANGELOOSE]:te[Z.XRANGE];return e.replace(n,(a,u,s,y,p,I)=>{B("xRange",e,a,u,s,y,p,I);let m=oe(s),g=m||oe(y),d=g||oe(p),S=d;return u==="="&&S&&(u=""),I=t.includePrerelease?"-0":"",m?a=u===">"||u==="<"?"<0.0.0-0":"*":u&&S?(g&&(y=0),p=0,u===">"?(u=">=",g?(s=+s+1,y=0,p=0):(y=+y+1,p=0)):u==="<="&&(u="<",g?s=+s+1:y=+y+1),u==="<"&&(I="-0"),a=`${u+s}.${y}.${p}${I}`):g?a=`>=${s}.0.0${I} <${+s+1}.0.0-0`:d&&(a=`>=${s}.${y}.0${I} <${s}.${+y+1}.0-0`),B("xRange return",a),a})},oo=(e,t)=>(B("replaceStars",e,t),e.trim().replace(te[Z.STAR],"")),io=(e,t)=>(B("replaceGTE0",e,t),e.trim().replace(te[t.includePrerelease?Z.GTE0PRE:Z.GTE0],"")),ao=e=>(t,n,a,u,s,y,p,I,m,g,d,S,j)=>`${n=oe(a)?"":oe(u)?`>=${a}.0.0${e?"-0":""}`:oe(s)?`>=${a}.${u}.0${e?"-0":""}`:y?`>=${n}`:`>=${n}${e?"-0":""}`} ${I=oe(m)?"":oe(g)?`<${+m+1}.0.0-0`:oe(d)?`<${m}.${+g+1}.0-0`:S?`<=${m}.${g}.${d}-${S}`:e?`<${m}.${g}.${+d+1}-0`:`<=${I}`}`.trim(),so=(e,t,n)=>{for(let a=0;a<e.length;a++)if(!e[a].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let a=0;a<e.length;a++)if(B(e[a].semver),e[a].semver!==je.ANY&&e[a].semver.prerelease.length>0){let u=e[a].semver;if(u.major===t.major&&u.minor===t.minor&&u.patch===t.patch)return!0}return!1}return!0},uo=(e,t,n)=>{try{t=new Ne(t,n)}catch{return!1}return t.test(e)},{MAX_LENGTH:co}=mt,{re:Kt,t:Jt}=ke,lo=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Q)return e;if(typeof e!="string"||e.length>co||!(t.loose?Kt[Jt.LOOSE]:Kt[Jt.FULL]).test(e))return null;try{return new Q(e,t)}catch{return null}},fo=lo,{re:Ge,t:We}=ke,ho=(e,t)=>{if(e instanceof Q)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let a;for(;(a=Ge[We.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&a.index+a[0].length===n.index+n[0].length||(n=a),Ge[We.COERCERTL].lastIndex=a.index+a[1].length+a[2].length;Ge[We.COERCERTL].lastIndex=-1}else n=e.match(Ge[We.COERCE]);return n===null?null:fo(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};function po(e){return String.fromCharCode(parseInt(e.slice(1),16))}function vo(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function mo(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,po))}function yo(e){return decodeURIComponent(Array.from(atob(e),vo).join(""))}function ar(e){return mo(JSON.stringify(e))}function go(e){return JSON.parse(yo(e))}function Me(e){return typeof e>"u"}function Eo(e){return e===null}function sr(e){return Eo(e)||Me(e)}function _o(e){return sr(e)?!1:!Me(e.jsonrpc)&&!Me(e.id)&&(!Me(e.result)||!Me(e.error))}function Io(e){return sr(e)?!1:typeof e=="number"&&Object.values(vt).includes(e)}function ht(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var Y={};function bo(e,t){return Object.assign(Y,t),e}var wo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn"},Ee=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Ee.prototype)}},Ke=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Io(t)?t:vt.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,Object.setPrototypeOf(this,Ke.prototype)}},yt=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},ur=class extends Error{constructor(e,t,n,a){super(`Magic Extension Error (${e.name}): [${t}] ${n}`),this.code=t,this.rawMessage=n,this.data=a,this.__proto__=Error,Object.setPrototypeOf(this,ur.prototype)}},Qt=class{constructor(t,n,a){this.code=n,this.rawMessage=a,this.message=`Magic Extension Warning (${t.name}): [${n}] ${a}`}log(){console.warn(this.message)}};function Oo(){return new Ee(ge.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function No(){return new Ee(ge.ModalNotReady,"Modal is not ready.")}function Ro(){return new Ee(ge.MalformedResponse,"Response from the Magic iframe is malformed.")}function So(e){return new Ee(ge.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Ao(e){let t=`Some extensions are incompatible with \`${Y.sdkName}@${Y.version}\`:`;return e.filter(n=>typeof n.compat<"u"&&n.compat!==null).forEach(n=>{let a=n.compat[Y.sdkName];typeof a=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${a}\``:a||(t+=`
  - Extension \`${n.name}\` does not support ${Y.platform} environments.`)}),new Ee(ge.IncompatibleExtensions,t)}function Lo(e){let t=n=>{let a=n+1,u=a%10,s=a%100;return u===1&&s!==11?`${a}st`:u===2&&s!==12?`${a}nd`:u===3&&s!==13?`${a}rd`:`${a}th`};return new Ee(ge.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function To(){return new yt(tt.DuplicateIframe,"Duplicate iframes found.")}function $o(){return new yt(tt.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Mo(){return new yt(tt.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${Y.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function*Po(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var jo=Po();function cr(){return jo.next().value}var lr=Symbol("Payload pre-processed by Magic SDK");function fr(e){return Object.defineProperty(e,lr,{value:!0,enumerable:!1}),e}function Co(e){return!!e[lr]}function Je(e){var t,n,a;return Co(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=cr(),e.method=(n=e.method)!=null?n:"noop",e.params=(a=e.params)!=null?a:[],fr(e)),e}function se(e,t=[]){return fr({params:t,method:e,jsonrpc:"2.0",id:cr()})}var gt=class{constructor(e){e instanceof gt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):_o(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Do=Sn(An()),ko=class extends Do.default{};function dr(){let e=new ko;return{emitter:e,createChainingEmitterMethod:(t,n)=>(...a)=>(e[t].apply(e,a),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}var hr=Symbol("isPromiEvent");function xo(e){return!!e[hr]}function pr(e){let t=vr(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:a}=dr(),u=Symbol("Promise.then"),s=Symbol("Promise.catch"),y=Symbol("Promise.finally"),p=(g,d)=>(...S)=>{let j=d[g].apply(d,S);return I(j)},I=g=>Object.assign(g,{[hr]:!0,[u]:g[u]||g.then,[s]:g[s]||g.catch,[y]:g[y]||g.finally,then:p(u,g),catch:p(s,g),finally:p(y,g),on:a("on",g),once:a("once",g),addListener:a("addListener",g),off:a("off",g),removeListener:a("removeListener",g),removeAllListeners:a("removeAllListeners",g),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),m=I(t.then(g=>(m.emit("done",g),m.emit("settled"),g),g=>{throw m.emit("error",g),m.emit("settled"),g}));return m}function vr(e){return new Promise((t,n)=>{let a=e(t,n);Promise.resolve(a).catch(n)})}var xe=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ye.MAGIC_HANDLE_REQUEST,Je(e)),n=pr((u,s)=>{t.then(y=>{if(a(),y.hasError)s(new Ke(y.payload.error));else if(y.hasResult)u(y.payload.result);else throw Ro()}).catch(y=>{a(),s(y)})}),a=this.overlay.on(Oe.MAGIC_HANDLE_EVENT,u=>{var s;let{response:y}=u.data;if(y.id===e.id&&((s=y.result)!=null&&s.event)){let{event:p,params:I=[]}=y.result;n.emit(p,...I)}});return n}},Uo=class extends xe{loginWithMagicLink(e){let{email:t,showUI:n=!0,redirectURI:a}=e,u=se(this.sdk.testMode?H.LoginWithMagicLinkTestMode:H.LoginWithMagicLink,[{email:t,showUI:n,redirectURI:a}]);return this.request(u)}loginWithSMS(e){let{phoneNumber:t}=e,n=se(this.sdk.testMode?H.LoginWithSmsTestMode:H.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithEmailOTP(e){let{email:t}=e,n=se(this.sdk.testMode?H.LoginWithEmailOTPTestMode:H.LoginWithEmailOTP,[{email:t,showUI:!0}]);return this.request(n)}loginWithCredential(e){let t=e??"";if(!e&&Y.platform==="web"){t=window.location.search;let a=window.location.origin+window.location.pathname;window.history.replaceState(null,"",a)}let n=se(this.sdk.testMode?H.LoginWithCredentialTestMode:H.LoginWithCredential,[t]);return this.request(n)}},mr={};Nn(mr,{clear:()=>Fo,getItem:()=>Ce,iterate:()=>qo,key:()=>Go,keys:()=>Wo,length:()=>Bo,removeItem:()=>pt,setItem:()=>Qe});var qe;function ve(e){return(...t)=>le(this,null,function*(){return qe||(qe=yield Y.configureStorage()),yield qe.ready(),qe[e](...t)})}var Ce=ve("getItem"),Qe=ve("setItem"),pt=ve("removeItem"),Fo=ve("clear"),Bo=ve("length"),Go=ve("key"),Wo=ve("keys"),qo=ve("iterate");function zo(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var Et="STORE_KEY_PRIVATE_KEY",Ze="STORE_KEY_PUBLIC_JWK",_t="ECDSA",yr="P-256",Ho={name:_t,namedCurve:yr},Xo={name:_t,namedCurve:yr};function Vo(){pt(Ze),pt(Et)}function Yo(){return le(this,null,function*(){let e=yield Ko();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield Ce(Et);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let a={iat:Math.floor(new Date().getTime()/1e3),jti:zo()},u={typ:"dpop+jwt",alg:"ES256",jwk:e},s={protected:Zt(JSON.stringify(u)),claims:Zt(JSON.stringify(a))},y=Zo(`${s.protected}.${s.claims}`),p={name:_t,hash:{name:"SHA-256"}},I=ti(new Uint8Array(yield t.sign(p,n,y)));return`${s.protected}.${s.claims}.${I}`})}function Ko(){return le(this,null,function*(){if(!Qo()){console.info("webcrypto is not supported");return}return(yield Ce(Ze))||(yield Jo()),Ce(Ze)})}function Jo(){return le(this,null,function*(){let e=null,{subtle:t}=window.crypto,n=yield t.generateKey(Ho,!0,["sign"]),a=yield t.exportKey("jwk",n.privateKey);e=yield t.exportKey("jwk",n.publicKey);let u=yield t.importKey("jwk",a,Xo,!1,["sign"]);yield Qe(Et,u),yield Qe(Ze,e)})}function Qo(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function Zt(e){return gr(ei(e))}function Zo(e){return new TextEncoder().encode(e)}function gr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function ei(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}function ti(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n)}),gr(t)}var ri=class extends xe{getIdToken(t){let n=se(this.sdk.testMode?H.GetIdTokenTestMode:H.GetIdToken,[t]);return this.request(n)}generateIdToken(t){let n=se(this.sdk.testMode?H.GenerateIdTokenTestMode:H.GenerateIdToken,[t]);return this.request(n)}getMetadata(){let t=se(this.sdk.testMode?H.GetMetadataTestMode:H.GetMetadata);return this.request(t)}updateEmail(t){let{email:n,showUI:a=!0}=t,u=se(this.sdk.testMode?H.UpdateEmailTestMode:H.UpdateEmail,[{email:n,showUI:a}]);return this.request(u)}isLoggedIn(){let t=se(this.sdk.testMode?H.IsLoggedInTestMode:H.IsLoggedIn);return this.request(t)}logout(){Vo();let t=se(this.sdk.testMode?H.LogoutTestMode:H.Logout);return this.request(t)}showSettings(){let t=se(this.sdk.testMode?H.UserSettingsTestMode:H.UserSettings);return this.request(t)}},{createBoundEmitterMethod:ze,createChainingEmitterMethod:we}=dr(),ni=class extends xe{constructor(){super(...arguments),this.isMagic=!0,this.on=we("on",this),this.once=we("once",this),this.addListener=we("addListener",this),this.off=we("off",this),this.removeListener=we("removeListener",this),this.removeAllListeners=we("removeAllListeners",this),this.emit=ze("emit"),this.eventNames=ze("eventNames"),this.listeners=ze("listeners"),this.listenerCount=ze("listenerCount")}sendAsync(e,t){if(!t)throw Lo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ye.MAGIC_HANDLE_REQUEST,e.map(n=>{let a=Je(n);return this.prefixPayloadMethodForTestMode(a),a})).then(n=>{t(null,n.map(a=>bn(or({},a.payload),{error:a.hasError?new Ke(a.payload.error):null})))});else{let n=Je(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(Ye.MAGIC_HANDLE_REQUEST,n).then(a=>{t(a.hasError?new Ke(a.payload.error):null,a.payload)})}}send(e,t){if(typeof e=="string"){let a=se(e,Array.isArray(t)?t:[]);return this.request(a)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let n=$o();return n.log(),new gt(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=se("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}};function et(e,t){return t?new URL(e,t):new URL(e)}var er=["request","overlay","sdk"];function oi(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==xe.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}var Er=class extends xe{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:pr,isPromiEvent:xo,encodeJSON:ar,decodeJSON:go,createJsonRpcRequestPayload:se,standardizeJsonRpcRequestPayload:Je,storage:mr};let e=[this,...oi(this)];er.forEach(t=>{let n=e.map(y=>Object.getOwnPropertyDescriptor(y,t)),a=n.findIndex(y=>!!y),u=a>0,s=n[a];s&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:s,isPrototypeField:u}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw So(t)}}))})}init(e){this.__is_initialized__||(er.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:a}=this.__sdk_access_field_descriptors__.get(t);a?delete this[t]:Object.defineProperty(this,t,n)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:a}=e,u=a?` Use \`${a}\` instead.`:"",s=`\`${t}\` will be removed from this Extension in version \`${n}\`.${u}`;return new Qt(this,"DEPRECATION_NOTICE",s)}createWarning(e,t){return new Qt(this,e,t)}createError(e,t,n){return new ur(this,e,t,n)}},ii=class extends Er{},Pe=class extends Er{};Pe.Internal=ii,Pe.Anonymous="anonymous extension";function tr(e){return e.compat&&e.compat[Y.sdkName]!=null?typeof e.compat[Y.sdkName]=="string"?uo(ho(Y.version),e.compat[Y.sdkName]):!!e.compat[Y.sdkName]:!0}function ai(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],a={},u=[];if(Array.isArray(n)?n.forEach(s=>{tr(s)?(s.init(this),(s.name||s.name!==Pe.Anonymous)&&(this[s.name]=s),s instanceof Pe.Internal&&(ht(s.config)||(a[s.name]=s.config))):u.push(s)}):Object.keys(n).forEach(s=>{if(tr(n[s])){n[s].init(this);let y=n[s];this[s]=y,y instanceof Pe.Internal&&(ht(y.config)||(a[n[s].name]=y.config))}else u.push(n[s])}),u.length)throw Ao(u);return a}var Xe=class{constructor(e,t){this.apiKey=e;var n;if(!e)throw Oo();Y.platform==="react-native"&&(t!=null&&t.endpoint)&&Mo().log();let{defaultEndpoint:a,version:u}=Y;this.testMode=!!(t!=null&&t.testMode),this.endpoint=et((n=t==null?void 0:t.endpoint)!=null?n:a).origin,this.auth=new Uo(this),this.user=new ri(this),this.rpcProvider=new ni(this);let s=ai.call(this,t);this.parameters=ar(or({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:et(this.endpoint).host,sdk:wo[Y.sdkName],version:u,ext:ht(s)?void 0:s,locale:(t==null?void 0:t.locale)||"en_US"},Y.bundleId?{bundleId:Y.bundleId}:{}))}get overlay(){if(!Xe.__overlays__.has(this.parameters)){let e=new Y.ViewController(this.endpoint,this.parameters);e.init(),Xe.__overlays__.set(this.parameters,e)}return Xe.__overlays__.get(this.parameters)}preload(){return le(this,null,function*(){yield this.overlay.ready})}},_r=Xe;_r.__overlays__=new Map;function si(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}function ui(e,t){var n;let a=(n=t.data.response)==null?void 0:n.id,u=si(e,a);if(a&&u){let s=new gt(u).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:a,response:s}}return{}}function ci(e,t){return le(this,null,function*(){let n=yield Ce("rt"),a;if(Y.platform==="web")try{a=yield Yo()}catch(u){console.error("webcrypto error",u)}return a?n?{msgType:e,payload:t,jwt:a,rt:n}:{msgType:e,payload:t,jwt:a}:{msgType:e,payload:t}})}function li(e){return le(this,null,function*(){!e.data.rt||(yield Qe("rt",e.data.rt))})}var fi=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return le(this,null,function*(){return vr(n=>le(this,null,function*(){yield this.ready;let a=[],u=Array.isArray(t)?t.map(I=>I.id):[],s=yield ci(`${e}-${this.parameters}`,t);yield this._post(s);let y=I=>m=>{let{id:g,response:d}=ui(t,m);li(m),g&&d&&Array.isArray(t)&&u.includes(g)?(a.push(d),a.length===t.length&&(I(),n(a))):g&&d&&!Array.isArray(t)&&g===t.id&&(I(),n(d))},p=this.on(Oe.MAGIC_HANDLE_RESPONSE,y(()=>p()))}))})}on(e,t){let n=t.bind(window),a=u=>{u.data.msgType===`${e}-${this.parameters}`&&n(u)};return this.messageHandlers.add(a),()=>this.messageHandlers.delete(a)}waitForReady(){return new Promise(e=>{this.on(Oe.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(Oe.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Oe.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},di=Object.create,It=Object.defineProperty,hi=Object.getOwnPropertyDescriptor,pi=Object.getOwnPropertyNames,vi=Object.getPrototypeOf,mi=Object.prototype.hasOwnProperty,yi=e=>It(e,"__esModule",{value:!0}),He=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Ir=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gi=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of pi(t))!mi.call(e,u)&&(n||u!=="default")&&It(e,u,{get:()=>t[u],enumerable:!(a=hi(t,u))||a.enumerable});return e},br=(e,t)=>gi(yi(It(e!=null?di(vi(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Ve=(e,t,n)=>new Promise((a,u)=>{var s=I=>{try{p(n.next(I))}catch(m){u(m)}},y=I=>{try{p(n.throw(I))}catch(m){u(m)}},p=I=>I.done?a(I.value):Promise.resolve(I.value).then(s,y);p((n=n.apply(e,t)).next())}),Ei=Ir((e,t)=>{(function(n){if(typeof e=="object"&&typeof t<"u")t.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var a;typeof window<"u"?a=window:typeof pe.global<"u"?a=pe.global:typeof self<"u"?a=self:a=this,a.localforage=n()}})(function(){return function n(a,u,s){function y(m,g){if(!u[m]){if(!a[m]){var d=typeof He=="function"&&He;if(!g&&d)return d(m,!0);if(p)return p(m,!0);var S=new Error("Cannot find module '"+m+"'");throw S.code="MODULE_NOT_FOUND",S}var j=u[m]={exports:{}};a[m][0].call(j.exports,function(P){var x=a[m][1][P];return y(x||P)},j,j.exports,n,a,u,s)}return u[m].exports}for(var p=typeof He=="function"&&He,I=0;I<s.length;I++)y(s[I]);return y}({1:[function(n,a,u){(function(s){var y=s.MutationObserver||s.WebKitMutationObserver,p;if(y){var I=0,m=new y(P),g=s.document.createTextNode("");m.observe(g,{characterData:!0}),p=function(){g.data=I=++I%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=P,p=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?p=function(){var A=s.document.createElement("script");A.onreadystatechange=function(){P(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},s.document.documentElement.appendChild(A)}:p=function(){setTimeout(P,0)};var S,j=[];function P(){S=!0;for(var A,V,G=j.length;G;){for(V=j,j=[],A=-1;++A<G;)V[A]();G=j.length}S=!1}a.exports=x;function x(A){j.push(A)===1&&!S&&p()}}).call(this,typeof pe.global<"u"?pe.global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,a,u){var s=n(1);function y(){}var p={},I=["REJECTED"],m=["FULFILLED"],g=["PENDING"];a.exports=d;function d(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,N!==y&&x(this,N)}d.prototype.catch=function(N){return this.then(null,N)},d.prototype.then=function(N,k){if(typeof N!="function"&&this.state===m||typeof k!="function"&&this.state===I)return this;var C=new this.constructor(y);if(this.state!==g){var U=this.state===m?N:k;j(C,U,this.outcome)}else this.queue.push(new S(C,N,k));return C};function S(N,k,C){this.promise=N,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(N){p.resolve(this.promise,N)},S.prototype.otherCallFulfilled=function(N){j(this.promise,this.onFulfilled,N)},S.prototype.callRejected=function(N){p.reject(this.promise,N)},S.prototype.otherCallRejected=function(N){j(this.promise,this.onRejected,N)};function j(N,k,C){s(function(){var U;try{U=k(C)}catch(K){return p.reject(N,K)}U===N?p.reject(N,new TypeError("Cannot resolve promise with itself")):p.resolve(N,U)})}p.resolve=function(N,k){var C=A(P,k);if(C.status==="error")return p.reject(N,C.value);var U=C.value;if(U)x(N,U);else{N.state=m,N.outcome=k;for(var K=-1,re=N.queue.length;++K<re;)N.queue[K].callFulfilled(k)}return N},p.reject=function(N,k){N.state=I,N.outcome=k;for(var C=-1,U=N.queue.length;++C<U;)N.queue[C].callRejected(k);return N};function P(N){var k=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof k=="function")return function(){k.apply(N,arguments)}}function x(N,k){var C=!1;function U(ae){C||(C=!0,p.reject(N,ae))}function K(ae){C||(C=!0,p.resolve(N,ae))}function re(){k(K,U)}var ie=A(re);ie.status==="error"&&U(ie.value)}function A(N,k){var C={};try{C.value=N(k),C.status="success"}catch(U){C.status="error",C.value=U}return C}d.resolve=V;function V(N){return N instanceof this?N:p.resolve(new this(y),N)}d.reject=G;function G(N){var k=new this(y);return p.reject(k,N)}d.all=W;function W(N){var k=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=N.length,U=!1;if(!C)return this.resolve([]);for(var K=new Array(C),re=0,ie=-1,ae=new this(y);++ie<C;)ce(N[ie],ie);return ae;function ce(me,_e){k.resolve(me).then(Se,function(fe){U||(U=!0,p.reject(ae,fe))});function Se(fe){K[_e]=fe,++re===C&&!U&&(U=!0,p.resolve(ae,K))}}}d.race=ue;function ue(N){var k=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=N.length,U=!1;if(!C)return this.resolve([]);for(var K=-1,re=new this(y);++K<C;)ie(N[K]);return re;function ie(ae){k.resolve(ae).then(function(ce){U||(U=!0,p.resolve(re,ce))},function(ce){U||(U=!0,p.reject(re,ce))})}}},{1:1}],3:[function(n,a,u){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof pe.global<"u"?pe.global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,a,u){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function y(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function p(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var I=p();function m(){try{if(!I||!I.open)return!1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),o=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||o)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(r,o){r=r||[],o=o||{};try{return new Blob(r,o)}catch(f){if(f.name!=="TypeError")throw f;for(var i=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,l=new i,c=0;c<r.length;c+=1)l.append(r[c]);return l.getBlob(o.type)}}typeof Promise>"u"&&n(3);var d=Promise;function S(r,o){o&&r.then(function(i){o(null,i)},function(i){o(i)})}function j(r,o,i){typeof o=="function"&&r.then(o),typeof i=="function"&&r.catch(i)}function P(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}function x(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var A="local-forage-detect-blob-support",V=void 0,G={},W=Object.prototype.toString,ue="readonly",N="readwrite";function k(r){for(var o=r.length,i=new ArrayBuffer(o),l=new Uint8Array(i),c=0;c<o;c++)l[c]=r.charCodeAt(c);return i}function C(r){return new d(function(o){var i=r.transaction(A,N),l=g([""]);i.objectStore(A).put(l,"key"),i.onabort=function(c){c.preventDefault(),c.stopPropagation(),o(!1)},i.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);o(f||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function U(r){return typeof V=="boolean"?d.resolve(V):C(r).then(function(o){return V=o,V})}function K(r){var o=G[r.name],i={};i.promise=new d(function(l,c){i.resolve=l,i.reject=c}),o.deferredOperations.push(i),o.dbReady?o.dbReady=o.dbReady.then(function(){return i.promise}):o.dbReady=i.promise}function re(r){var o=G[r.name],i=o.deferredOperations.pop();if(i)return i.resolve(),i.promise}function ie(r,o){var i=G[r.name],l=i.deferredOperations.pop();if(l)return l.reject(o),l.promise}function ae(r,o){return new d(function(i,l){if(G[r.name]=G[r.name]||$(),r.db)if(o)K(r),r.db.close();else return i(r.db);var c=[r.name];o&&c.push(r.version);var f=I.open.apply(I,c);o&&(f.onupgradeneeded=function(v){var _=f.result;try{_.createObjectStore(r.storeName),v.oldVersion<=1&&_.createObjectStore(A)}catch(O){if(O.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+v.oldVersion+" to version "+v.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw O}}),f.onerror=function(v){v.preventDefault(),l(f.error)},f.onsuccess=function(){i(f.result),re(r)}})}function ce(r){return ae(r,!1)}function me(r){return ae(r,!0)}function _e(r,o){if(!r.db)return!0;var i=!r.db.objectStoreNames.contains(r.storeName),l=r.version<r.db.version,c=r.version>r.db.version;if(l&&(r.version!==o&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),c||i){if(i){var f=r.db.version+1;f>r.version&&(r.version=f)}return!0}return!1}function Se(r){return new d(function(o,i){var l=new FileReader;l.onerror=i,l.onloadend=function(c){var f=btoa(c.target.result||"");o({__local_forage_encoded_blob:!0,data:f,type:r.type})},l.readAsBinaryString(r)})}function fe(r){var o=k(atob(r.data));return g([o],{type:r.type})}function h(r){return r&&r.__local_forage_encoded_blob}function E(r){var o=this,i=o._initReady().then(function(){var l=G[o._dbInfo.name];if(l&&l.dbReady)return l.dbReady});return j(i,r,r),i}function R(r){K(r);for(var o=G[r.name],i=o.forages,l=0;l<i.length;l++){var c=i[l];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return r.db=null,ce(r).then(function(f){return r.db=f,_e(r)?me(r):f}).then(function(f){r.db=o.db=f;for(var v=0;v<i.length;v++)i[v]._dbInfo.db=f}).catch(function(f){throw ie(r,f),f})}function L(r,o,i,l){l===void 0&&(l=1);try{var c=r.db.transaction(r.storeName,o);i(null,c)}catch(f){if(l>0&&(!r.db||f.name==="InvalidStateError"||f.name==="NotFoundError"))return d.resolve().then(function(){if(!r.db||f.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),me(r)}).then(function(){return R(r).then(function(){L(r,o,i,l-1)})}).catch(i);i(f)}}function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(r){var o=this,i={db:null};if(r)for(var l in r)i[l]=r[l];var c=G[i.name];c||(c=$(),G[i.name]=c),c.forages.push(o),o._initReady||(o._initReady=o.ready,o.ready=E);var f=[];function v(){return d.resolve()}for(var _=0;_<c.forages.length;_++){var O=c.forages[_];O!==o&&f.push(O._initReady().catch(v))}var w=c.forages.slice(0);return d.all(f).then(function(){return i.db=c.db,ce(i)}).then(function(b){return i.db=b,_e(i,o._defaultConfig.version)?me(i):b}).then(function(b){i.db=c.db=b,o._dbInfo=i;for(var T=0;T<w.length;T++){var D=w[T];D!==o&&(D._dbInfo.db=i.db,D._dbInfo.version=i.version)}})}function z(r,o){var i=this;r=P(r);var l=new d(function(c,f){i.ready().then(function(){L(i._dbInfo,ue,function(v,_){if(v)return f(v);try{var O=_.objectStore(i._dbInfo.storeName),w=O.get(r);w.onsuccess=function(){var b=w.result;b===void 0&&(b=null),h(b)&&(b=fe(b)),c(b)},w.onerror=function(){f(w.error)}}catch(b){f(b)}})}).catch(f)});return S(l,o),l}function ee(r,o){var i=this,l=new d(function(c,f){i.ready().then(function(){L(i._dbInfo,ue,function(v,_){if(v)return f(v);try{var O=_.objectStore(i._dbInfo.storeName),w=O.openCursor(),b=1;w.onsuccess=function(){var T=w.result;if(T){var D=T.value;h(D)&&(D=fe(D));var q=r(D,T.key,b++);q!==void 0?c(q):T.continue()}else c()},w.onerror=function(){f(w.error)}}catch(T){f(T)}})}).catch(f)});return S(l,o),l}function Ie(r,o,i){var l=this;r=P(r);var c=new d(function(f,v){var _;l.ready().then(function(){return _=l._dbInfo,W.call(o)==="[object Blob]"?U(_.db).then(function(O){return O?o:Se(o)}):o}).then(function(O){L(l._dbInfo,N,function(w,b){if(w)return v(w);try{var T=b.objectStore(l._dbInfo.storeName);O===null&&(O=void 0);var D=T.put(O,r);b.oncomplete=function(){O===void 0&&(O=null),f(O)},b.onabort=b.onerror=function(){var q=D.error?D.error:D.transaction.error;v(q)}}catch(q){v(q)}})}).catch(v)});return S(c,i),c}function ye(r,o){var i=this;r=P(r);var l=new d(function(c,f){i.ready().then(function(){L(i._dbInfo,N,function(v,_){if(v)return f(v);try{var O=_.objectStore(i._dbInfo.storeName),w=O.delete(r);_.oncomplete=function(){c()},_.onerror=function(){f(w.error)},_.onabort=function(){var b=w.error?w.error:w.transaction.error;f(b)}}catch(b){f(b)}})}).catch(f)});return S(l,o),l}function Ae(r){var o=this,i=new d(function(l,c){o.ready().then(function(){L(o._dbInfo,N,function(f,v){if(f)return c(f);try{var _=v.objectStore(o._dbInfo.storeName),O=_.clear();v.oncomplete=function(){l()},v.onabort=v.onerror=function(){var w=O.error?O.error:O.transaction.error;c(w)}}catch(w){c(w)}})}).catch(c)});return S(i,r),i}function wr(r){var o=this,i=new d(function(l,c){o.ready().then(function(){L(o._dbInfo,ue,function(f,v){if(f)return c(f);try{var _=v.objectStore(o._dbInfo.storeName),O=_.count();O.onsuccess=function(){l(O.result)},O.onerror=function(){c(O.error)}}catch(w){c(w)}})}).catch(c)});return S(i,r),i}function Or(r,o){var i=this,l=new d(function(c,f){if(r<0){c(null);return}i.ready().then(function(){L(i._dbInfo,ue,function(v,_){if(v)return f(v);try{var O=_.objectStore(i._dbInfo.storeName),w=!1,b=O.openKeyCursor();b.onsuccess=function(){var T=b.result;if(!T){c(null);return}r===0||w?c(T.key):(w=!0,T.advance(r))},b.onerror=function(){f(b.error)}}catch(T){f(T)}})}).catch(f)});return S(l,o),l}function Nr(r){var o=this,i=new d(function(l,c){o.ready().then(function(){L(o._dbInfo,ue,function(f,v){if(f)return c(f);try{var _=v.objectStore(o._dbInfo.storeName),O=_.openKeyCursor(),w=[];O.onsuccess=function(){var b=O.result;if(!b){l(w);return}w.push(b.key),b.continue()},O.onerror=function(){c(O.error)}}catch(b){c(b)}})}).catch(c)});return S(i,r),i}function Rr(r,o){o=x.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var l=this,c;if(!r.name)c=d.reject("Invalid arguments");else{var f=r.name===i.name&&l._dbInfo.db,v=f?d.resolve(l._dbInfo.db):ce(r).then(function(_){var O=G[r.name],w=O.forages;O.db=_;for(var b=0;b<w.length;b++)w[b]._dbInfo.db=_;return _});r.storeName?c=v.then(function(_){if(_.objectStoreNames.contains(r.storeName)){var O=_.version+1;K(r);var w=G[r.name],b=w.forages;_.close();for(var T=0;T<b.length;T++){var D=b[T];D._dbInfo.db=null,D._dbInfo.version=O}var q=new d(function(F,J){var X=I.open(r.name,O);X.onerror=function(ne){var ct=X.result;ct.close(),J(ne)},X.onupgradeneeded=function(){var ne=X.result;ne.deleteObjectStore(r.storeName)},X.onsuccess=function(){var ne=X.result;ne.close(),F(ne)}});return q.then(function(F){w.db=F;for(var J=0;J<b.length;J++){var X=b[J];X._dbInfo.db=F,re(X._dbInfo)}}).catch(function(F){throw(ie(r,F)||d.resolve()).catch(function(){}),F})}}):c=v.then(function(_){K(r);var O=G[r.name],w=O.forages;_.close();for(var b=0;b<w.length;b++){var T=w[b];T._dbInfo.db=null}var D=new d(function(q,F){var J=I.deleteDatabase(r.name);J.onerror=J.onblocked=function(X){var ne=J.result;ne&&ne.close(),F(X)},J.onsuccess=function(){var X=J.result;X&&X.close(),q(X)}});return D.then(function(q){O.db=q;for(var F=0;F<w.length;F++){var J=w[F];re(J._dbInfo)}}).catch(function(q){throw(ie(r,q)||d.resolve()).catch(function(){}),q})})}return S(c,o),c}var Sr={_driver:"asyncStorage",_initStorage:M,_support:m(),iterate:ee,getItem:z,setItem:Ie,removeItem:ye,clear:Ae,length:wr,key:Or,keys:Nr,dropInstance:Rr};function Ar(){return typeof openDatabase=="function"}var de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lr="~~local_forage_type~",bt=/^~~local_forage_type~([^~]+)~/,Ue="__lfsc__:",rt=Ue.length,nt="arbf",ot="blob",wt="si08",Ot="ui08",Nt="uic8",Rt="si16",St="si32",At="ur16",Lt="ui32",Tt="fl32",$t="fl64",Mt=rt+nt.length,Pt=Object.prototype.toString;function jt(r){var o=r.length*.75,i=r.length,l,c=0,f,v,_,O;r[r.length-1]==="="&&(o--,r[r.length-2]==="="&&o--);var w=new ArrayBuffer(o),b=new Uint8Array(w);for(l=0;l<i;l+=4)f=de.indexOf(r[l]),v=de.indexOf(r[l+1]),_=de.indexOf(r[l+2]),O=de.indexOf(r[l+3]),b[c++]=f<<2|v>>4,b[c++]=(v&15)<<4|_>>2,b[c++]=(_&3)<<6|O&63;return w}function it(r){var o=new Uint8Array(r),i="",l;for(l=0;l<o.length;l+=3)i+=de[o[l]>>2],i+=de[(o[l]&3)<<4|o[l+1]>>4],i+=de[(o[l+1]&15)<<2|o[l+2]>>6],i+=de[o[l+2]&63];return o.length%3===2?i=i.substring(0,i.length-1)+"=":o.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function Tr(r,o){var i="";if(r&&(i=Pt.call(r)),r&&(i==="[object ArrayBuffer]"||r.buffer&&Pt.call(r.buffer)==="[object ArrayBuffer]")){var l,c=Ue;r instanceof ArrayBuffer?(l=r,c+=nt):(l=r.buffer,i==="[object Int8Array]"?c+=wt:i==="[object Uint8Array]"?c+=Ot:i==="[object Uint8ClampedArray]"?c+=Nt:i==="[object Int16Array]"?c+=Rt:i==="[object Uint16Array]"?c+=At:i==="[object Int32Array]"?c+=St:i==="[object Uint32Array]"?c+=Lt:i==="[object Float32Array]"?c+=Tt:i==="[object Float64Array]"?c+=$t:o(new Error("Failed to get type for BinaryArray"))),o(c+it(l))}else if(i==="[object Blob]"){var f=new FileReader;f.onload=function(){var v=Lr+r.type+"~"+it(this.result);o(Ue+ot+v)},f.readAsArrayBuffer(r)}else try{o(JSON.stringify(r))}catch(v){console.error("Couldn't convert value into a JSON string: ",r),o(null,v)}}function $r(r){if(r.substring(0,rt)!==Ue)return JSON.parse(r);var o=r.substring(Mt),i=r.substring(rt,Mt),l;if(i===ot&&bt.test(o)){var c=o.match(bt);l=c[1],o=o.substring(c[0].length)}var f=jt(o);switch(i){case nt:return f;case ot:return g([f],{type:l});case wt:return new Int8Array(f);case Ot:return new Uint8Array(f);case Nt:return new Uint8ClampedArray(f);case Rt:return new Int16Array(f);case At:return new Uint16Array(f);case St:return new Int32Array(f);case Lt:return new Uint32Array(f);case Tt:return new Float32Array(f);case $t:return new Float64Array(f);default:throw new Error("Unkown type: "+i)}}var at={serialize:Tr,deserialize:$r,stringToBuffer:jt,bufferToString:it};function Ct(r,o,i,l){r.executeSql("CREATE TABLE IF NOT EXISTS "+o.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,l)}function Mr(r){var o=this,i={db:null};if(r)for(var l in r)i[l]=typeof r[l]!="string"?r[l].toString():r[l];var c=new d(function(f,v){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(_){return v(_)}i.db.transaction(function(_){Ct(_,i,function(){o._dbInfo=i,f()},function(O,w){v(w)})},v)});return i.serializer=at,c}function he(r,o,i,l,c,f){r.executeSql(i,l,c,function(v,_){_.code===_.SYNTAX_ERR?v.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[o.storeName],function(O,w){w.rows.length?f(O,_):Ct(O,o,function(){O.executeSql(i,l,c,f)},f)},f):f(v,_)},f)}function Pr(r,o){var i=this;r=P(r);var l=new d(function(c,f){i.ready().then(function(){var v=i._dbInfo;v.db.transaction(function(_){he(_,v,"SELECT * FROM "+v.storeName+" WHERE key = ? LIMIT 1",[r],function(O,w){var b=w.rows.length?w.rows.item(0).value:null;b&&(b=v.serializer.deserialize(b)),c(b)},function(O,w){f(w)})})}).catch(f)});return S(l,o),l}function jr(r,o){var i=this,l=new d(function(c,f){i.ready().then(function(){var v=i._dbInfo;v.db.transaction(function(_){he(_,v,"SELECT * FROM "+v.storeName,[],function(O,w){for(var b=w.rows,T=b.length,D=0;D<T;D++){var q=b.item(D),F=q.value;if(F&&(F=v.serializer.deserialize(F)),F=r(F,q.key,D+1),F!==void 0){c(F);return}}c()},function(O,w){f(w)})})}).catch(f)});return S(l,o),l}function Dt(r,o,i,l){var c=this;r=P(r);var f=new d(function(v,_){c.ready().then(function(){o===void 0&&(o=null);var O=o,w=c._dbInfo;w.serializer.serialize(o,function(b,T){T?_(T):w.db.transaction(function(D){he(D,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[r,b],function(){v(O)},function(q,F){_(F)})},function(D){if(D.code===D.QUOTA_ERR){if(l>0){v(Dt.apply(c,[r,O,i,l-1]));return}_(D)}})})}).catch(_)});return S(f,i),f}function Cr(r,o,i){return Dt.apply(this,[r,o,i,1])}function Dr(r,o){var i=this;r=P(r);var l=new d(function(c,f){i.ready().then(function(){var v=i._dbInfo;v.db.transaction(function(_){he(_,v,"DELETE FROM "+v.storeName+" WHERE key = ?",[r],function(){c()},function(O,w){f(w)})})}).catch(f)});return S(l,o),l}function kr(r){var o=this,i=new d(function(l,c){o.ready().then(function(){var f=o._dbInfo;f.db.transaction(function(v){he(v,f,"DELETE FROM "+f.storeName,[],function(){l()},function(_,O){c(O)})})}).catch(c)});return S(i,r),i}function xr(r){var o=this,i=new d(function(l,c){o.ready().then(function(){var f=o._dbInfo;f.db.transaction(function(v){he(v,f,"SELECT COUNT(key) as c FROM "+f.storeName,[],function(_,O){var w=O.rows.item(0).c;l(w)},function(_,O){c(O)})})}).catch(c)});return S(i,r),i}function Ur(r,o){var i=this,l=new d(function(c,f){i.ready().then(function(){var v=i._dbInfo;v.db.transaction(function(_){he(_,v,"SELECT key FROM "+v.storeName+" WHERE id = ? LIMIT 1",[r+1],function(O,w){var b=w.rows.length?w.rows.item(0).key:null;c(b)},function(O,w){f(w)})})}).catch(f)});return S(l,o),l}function Fr(r){var o=this,i=new d(function(l,c){o.ready().then(function(){var f=o._dbInfo;f.db.transaction(function(v){he(v,f,"SELECT key FROM "+f.storeName,[],function(_,O){for(var w=[],b=0;b<O.rows.length;b++)w.push(O.rows.item(b).key);l(w)},function(_,O){c(O)})})}).catch(c)});return S(i,r),i}function Br(r){return new d(function(o,i){r.transaction(function(l){l.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,f){for(var v=[],_=0;_<f.rows.length;_++)v.push(f.rows.item(_).name);o({db:r,storeNames:v})},function(c,f){i(f)})},function(l){i(l)})})}function Gr(r,o){o=x.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var l=this,c;return r.name?c=new d(function(f){var v;r.name===i.name?v=l._dbInfo.db:v=openDatabase(r.name,"","",0),r.storeName?f({db:v,storeNames:[r.storeName]}):f(Br(v))}).then(function(f){return new d(function(v,_){f.db.transaction(function(O){function w(q){return new d(function(F,J){O.executeSql("DROP TABLE IF EXISTS "+q,[],function(){F()},function(X,ne){J(ne)})})}for(var b=[],T=0,D=f.storeNames.length;T<D;T++)b.push(w(f.storeNames[T]));d.all(b).then(function(){v()}).catch(function(q){_(q)})},function(O){_(O)})})}):c=d.reject("Invalid arguments"),S(c,o),c}var Wr={_driver:"webSQLStorage",_initStorage:Mr,_support:Ar(),iterate:jr,getItem:Pr,setItem:Cr,removeItem:Dr,clear:kr,length:xr,key:Ur,keys:Fr,dropInstance:Gr};function qr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function kt(r,o){var i=r.name+"/";return r.storeName!==o.storeName&&(i+=r.storeName+"/"),i}function zr(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}function Hr(){return!zr()||localStorage.length>0}function Xr(r){var o=this,i={};if(r)for(var l in r)i[l]=r[l];return i.keyPrefix=kt(r,o._defaultConfig),Hr()?(o._dbInfo=i,i.serializer=at,d.resolve()):d.reject()}function Vr(r){var o=this,i=o.ready().then(function(){for(var l=o._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var f=localStorage.key(c);f.indexOf(l)===0&&localStorage.removeItem(f)}});return S(i,r),i}function Yr(r,o){var i=this;r=P(r);var l=i.ready().then(function(){var c=i._dbInfo,f=localStorage.getItem(c.keyPrefix+r);return f&&(f=c.serializer.deserialize(f)),f});return S(l,o),l}function Kr(r,o){var i=this,l=i.ready().then(function(){for(var c=i._dbInfo,f=c.keyPrefix,v=f.length,_=localStorage.length,O=1,w=0;w<_;w++){var b=localStorage.key(w);if(b.indexOf(f)===0){var T=localStorage.getItem(b);if(T&&(T=c.serializer.deserialize(T)),T=r(T,b.substring(v),O++),T!==void 0)return T}}});return S(l,o),l}function Jr(r,o){var i=this,l=i.ready().then(function(){var c=i._dbInfo,f;try{f=localStorage.key(r)}catch{f=null}return f&&(f=f.substring(c.keyPrefix.length)),f});return S(l,o),l}function Qr(r){var o=this,i=o.ready().then(function(){for(var l=o._dbInfo,c=localStorage.length,f=[],v=0;v<c;v++){var _=localStorage.key(v);_.indexOf(l.keyPrefix)===0&&f.push(_.substring(l.keyPrefix.length))}return f});return S(i,r),i}function Zr(r){var o=this,i=o.keys().then(function(l){return l.length});return S(i,r),i}function en(r,o){var i=this;r=P(r);var l=i.ready().then(function(){var c=i._dbInfo;localStorage.removeItem(c.keyPrefix+r)});return S(l,o),l}function tn(r,o,i){var l=this;r=P(r);var c=l.ready().then(function(){o===void 0&&(o=null);var f=o;return new d(function(v,_){var O=l._dbInfo;O.serializer.serialize(o,function(w,b){if(b)_(b);else try{localStorage.setItem(O.keyPrefix+r,w),v(f)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&_(T),_(T)}})})});return S(c,i),c}function rn(r,o){if(o=x.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var i=this.config();r.name=r.name||i.name,r.storeName=r.storeName||i.storeName}var l=this,c;return r.name?c=new d(function(f){r.storeName?f(kt(r,l._defaultConfig)):f(r.name+"/")}).then(function(f){for(var v=localStorage.length-1;v>=0;v--){var _=localStorage.key(v);_.indexOf(f)===0&&localStorage.removeItem(_)}}):c=d.reject("Invalid arguments"),S(c,o),c}var nn={_driver:"localStorageWrapper",_initStorage:Xr,_support:qr(),iterate:Kr,getItem:Yr,setItem:tn,removeItem:en,clear:Vr,length:Zr,key:Jr,keys:Qr,dropInstance:rn},on=function(r,o){return r===o||typeof r=="number"&&typeof o=="number"&&isNaN(r)&&isNaN(o)},an=function(r,o){for(var i=r.length,l=0;l<i;){if(on(r[l],o))return!0;l++}return!1},xt=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Le={},Ut={},be={INDEXEDDB:Sr,WEBSQL:Wr,LOCALSTORAGE:nn},sn=[be.INDEXEDDB._driver,be.WEBSQL._driver,be.LOCALSTORAGE._driver],Fe=["dropInstance"],st=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Fe),un={description:"",driver:sn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function cn(r,o){r[o]=function(){var i=arguments;return r.ready().then(function(){return r[o].apply(r,i)})}}function ut(){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o)for(var i in o)o.hasOwnProperty(i)&&(xt(o[i])?arguments[0][i]=o[i].slice():arguments[0][i]=o[i])}return arguments[0]}var ln=function(){function r(o){y(this,r);for(var i in be)if(be.hasOwnProperty(i)){var l=be[i],c=l._driver;this[i]=c,Le[c]||this.defineDriver(l)}this._defaultConfig=ut({},un),this._config=ut({},this._defaultConfig,o),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return r.prototype.config=function(o){if((typeof o>"u"?"undefined":s(o))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in o){if(i==="storeName"&&(o[i]=o[i].replace(/\W/g,"_")),i==="version"&&typeof o[i]!="number")return new Error("Database version must be a number.");this._config[i]=o[i]}return"driver"in o&&o.driver?this.setDriver(this._config.driver):!0}else return typeof o=="string"?this._config[o]:this._config},r.prototype.defineDriver=function(o,i,l){var c=new d(function(f,v){try{var _=o._driver,O=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!o._driver){v(O);return}for(var w=st.concat("_initStorage"),b=0,T=w.length;b<T;b++){var D=w[b],q=!an(Fe,D);if((q||o[D])&&typeof o[D]!="function"){v(O);return}}var F=function(){for(var X=function(dn){return function(){var hn=new Error("Method "+dn+" is not implemented by the current driver"),Ft=d.reject(hn);return S(Ft,arguments[arguments.length-1]),Ft}},ne=0,ct=Fe.length;ne<ct;ne++){var lt=Fe[ne];o[lt]||(o[lt]=X(lt))}};F();var J=function(X){Le[_]&&console.info("Redefining LocalForage driver: "+_),Le[_]=o,Ut[_]=X,f()};"_support"in o?o._support&&typeof o._support=="function"?o._support().then(J,v):J(!!o._support):J(!0)}catch(X){v(X)}});return j(c,i,l),c},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(o,i,l){var c=Le[o]?d.resolve(Le[o]):d.reject(new Error("Driver not found."));return j(c,i,l),c},r.prototype.getSerializer=function(o){var i=d.resolve(at);return j(i,o),i},r.prototype.ready=function(o){var i=this,l=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return j(l,o,o),l},r.prototype.setDriver=function(o,i,l){var c=this;xt(o)||(o=[o]);var f=this._getSupportedDrivers(o);function v(){c._config.driver=c.driver()}function _(b){return c._extend(b),v(),c._ready=c._initStorage(c._config),c._ready}function O(b){return function(){var T=0;function D(){for(;T<b.length;){var q=b[T];return T++,c._dbInfo=null,c._ready=null,c.getDriver(q).then(_).catch(D)}v();var F=new Error("No available storage method found.");return c._driverSet=d.reject(F),c._driverSet}return D()}}var w=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=w.then(function(){var b=f[0];return c._dbInfo=null,c._ready=null,c.getDriver(b).then(function(T){c._driver=T._driver,v(),c._wrapLibraryMethodsWithReady(),c._initDriver=O(f)})}).catch(function(){v();var b=new Error("No available storage method found.");return c._driverSet=d.reject(b),c._driverSet}),j(this._driverSet,i,l),this._driverSet},r.prototype.supports=function(o){return!!Ut[o]},r.prototype._extend=function(o){ut(this,o)},r.prototype._getSupportedDrivers=function(o){for(var i=[],l=0,c=o.length;l<c;l++){var f=o[l];this.supports(f)&&i.push(f)}return i},r.prototype._wrapLibraryMethodsWithReady=function(){for(var o=0,i=st.length;o<i;o++)cn(this,st[o])},r.prototype.createInstance=function(o){return new r(o)},r}(),fn=new ln;a.exports=fn},{3:3}]},{},[4])(4)})}),_i=Ir((e,t)=>{(function(n,a){typeof e=="object"&&typeof t<"u"?a(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],a):a(n.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(n){var a="localforage-driver-memory";function u(h){var E=typeof Symbol=="function"&&h[Symbol.iterator],R=0;return E?E.call(h):{next:function(){return h&&R>=h.length&&(h=void 0),{value:h&&h[R++],done:!h}}}}function s(h,E){h=h||[],E=E||{};try{return new Blob(h,E)}catch(M){if(M.name!=="TypeError")throw M;for(var R=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,L=new R,$=0;$<h.length;$+=1)L.append(h[$]);return L.getBlob(E.type)}}var y=/^~~local_forage_type~([^~]+)~/,p=9,I=p+4,m=Object.prototype.toString;function g(h){var E=h.length*.75,R=h.length;h[h.length-1]==="="&&(E--,h[h.length-2]==="="&&E--);for(var L=new ArrayBuffer(E),$=new Uint8Array(L),M=0,z=0;M<R;M+=4){var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[M]),Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[M+1]),ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[M+2]),Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[M+3]);$[z++]=ee<<2|Ie>>4,$[z++]=(Ie&15)<<4|ye>>2,$[z++]=(ye&3)<<6|Ae&63}return L}function d(h){for(var E=new Uint8Array(h),R="",L=0;L<E.length;L+=3)R+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[E[L]>>2],R+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(E[L]&3)<<4|E[L+1]>>4],R+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(E[L+1]&15)<<2|E[L+2]>>6],R+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[E[L+2]&63];return E.length%3===2?R=R.substring(0,R.length-1)+"=":E.length%3===1&&(R=R.substring(0,R.length-2)+"=="),R}function S(h,E){var R="";if(h&&(R=m.call(h)),h&&(R==="[object ArrayBuffer]"||h.buffer&&m.call(h.buffer)==="[object ArrayBuffer]")){var L=void 0,$="__lfsc__:";h instanceof ArrayBuffer?(L=h,$+="arbf"):(L=h.buffer,R==="[object Int8Array]"?$+="si08":R==="[object Uint8Array]"?$+="ui08":R==="[object Uint8ClampedArray]"?$+="uic8":R==="[object Int16Array]"?$+="si16":R==="[object Uint16Array]"?$+="ur16":R==="[object Int32Array]"?$+="si32":R==="[object Uint32Array]"?$+="ui32":R==="[object Float32Array]"?$+="fl32":R==="[object Float64Array]"?$+="fl64":E(new Error("Failed to get type for BinaryArray"))),E($+d(L))}else if(R==="[object Blob]"){var M=new FileReader;M.onload=function(){var z="~~local_forage_type~"+h.type+"~"+d(this.result);E("__lfsc__:blob"+z)},M.readAsArrayBuffer(h)}else try{E(JSON.stringify(h))}catch(z){console.error("Couldn't convert value into a JSON string: ",h),E(null,z)}}function j(h){if(h.substring(0,p)!=="__lfsc__:")return JSON.parse(h);var E=h.substring(I),R=h.substring(p,I),L;if(R==="blob"&&y.test(E)){var $=E.match(y);L=$[1],E=E.substring($[0].length)}var M=g(E);switch(R){case"arbf":return M;case"blob":return s([M],{type:L});case"si08":return new Int8Array(M);case"ui08":return new Uint8Array(M);case"uic8":return new Uint8ClampedArray(M);case"si16":return new Int16Array(M);case"ur16":return new Uint16Array(M);case"si32":return new Int32Array(M);case"ui32":return new Uint32Array(M);case"fl32":return new Float32Array(M);case"fl64":return new Float64Array(M);default:throw new Error("Unkown type: "+R)}}function P(h){var E,R;if(h===null||typeof h!="object"||"isActiveClone"in h)return h;var L=h instanceof Date?new Date(h):h.constructor();try{for(var $=u(Object.keys(h)),M=$.next();!M.done;M=$.next()){var z=M.value;Object.prototype.hasOwnProperty.call(h,z)&&(h.isActiveClone=null,L[z]=P(h[z]),delete h.isActiveClone)}}catch(ee){E={error:ee}}finally{try{M&&!M.done&&(R=$.return)&&R.call($)}finally{if(E)throw E.error}}return L}function x(h,E){return(h.name||E.name)+"/"+(h.storeName||E.storeName)+"/"}function A(h,E){E&&h.then(function(R){E(null,R)},function(R){E(R)})}function V(){for(var h=[],E=0;E<arguments.length;E++)h[E]=arguments[E];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function G(h,E){var R=this;if(E=V.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var L=this.config();h.name=h.name||L.name,h.storeName=h.storeName||L.storeName}var $;return h.name?$=new Promise(function(M){h.storeName?M(x(h,R._defaultConfig)):M(h.name+"/")}):$=Promise.reject("Invalid arguments"),{promise:$,callback:E}}function W(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}var ue={bufferToString:d,deserialize:j,serialize:S,stringToBuffer:g},N={},k=function(){function h(E){this.kp=E,this.data={}}return h.resolve=function(E){return N[E]||(N[E]=new h(E)),N[E]},h.prototype.clear=function(){this.data={}},h.prototype.drop=function(){this.clear(),delete N[this.kp]},h.prototype.get=function(E){return this.data[E]},h.prototype.key=function(E){return this.keys()[E]},h.prototype.keys=function(){return Object.keys(this.data)},h.prototype.rm=function(E){delete this.data[E]},h.prototype.set=function(E,R){this.data[E]=R},h}();function C(h){var E=h?P(h):{},R=x(E,this._defaultConfig),L=k.resolve(R);return this._dbInfo=E,this._dbInfo.serializer=ue,this._dbInfo.keyPrefix=R,this._dbInfo.mStore=L,Promise.resolve()}function U(h){var E=this,R=this.ready().then(function(){E._dbInfo.mStore.clear()});return A(R,h),R}function K(h,E){var R=G.apply(this,arguments),L=R.promise,$=R.callback,M=L.then(function(z){k.resolve(z).drop()});return A(M,$),L}function re(h,E){var R=this;h=W(h);var L=this.ready().then(function(){var $=R._dbInfo.mStore.get(h);return $==null?null:R._dbInfo.serializer.deserialize($)});return A(L,E),L}function ie(h,E){var R=this,L=this.ready().then(function(){for(var $=R._dbInfo.mStore,M=$.keys(),z=0;z<M.length;z++){var ee=$.get(M[z]);if(ee&&(ee=R._dbInfo.serializer.deserialize(ee)),ee=h(ee,M[z],z+1),ee!==void 0)return ee}});return A(L,E),L}function ae(h,E){var R=this,L=this.ready().then(function(){var $;try{$=R._dbInfo.mStore.key(h),$===void 0&&($=null)}catch{$=null}return $});return A(L,E),L}function ce(h){var E=this,R=this.ready().then(function(){return E._dbInfo.mStore.keys()});return A(R,h),R}function me(h){var E=this.keys().then(function(R){return R.length});return A(E,h),E}function _e(h,E){var R=this;h=W(h);var L=this.ready().then(function(){R._dbInfo.mStore.rm(h)});return A(L,E),L}function Se(h,E,R){var L=this;h=W(h);var $=this.ready().then(function(){E===void 0&&(E=null);var M=E;return new Promise(function(z,ee){L._dbInfo.serializer.serialize(E,function(Ie,ye){if(ye)ee(ye);else try{L._dbInfo.mStore.set(h,Ie),z(M)}catch(Ae){ee(Ae)}})})});return A($,R),$}var fe=!0;n._support=fe,n._driver=a,n._initStorage=C,n.clear=U,n.dropInstance=K,n.getItem=re,n.iterate=ie,n.key=ae,n.keys=ce,n.length=me,n.removeItem=_e,n.setItem=Se,Object.defineProperty(n,"__esModule",{value:!0})})}),dt=br(Ei()),rr=br(_i()),Ii={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function bi(e){for(let[t,n]of Object.entries(Ii))e.style[t]=n}function wi(e){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(n=>n.src.includes(e))}var Oi=class extends fi{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=()=>{if(wi(encodeURIComponent(this.parameters)))To().log();else{let n=document.createElement("iframe");n.classList.add("magic-iframe"),n.dataset.magicIframeLabel=et(this.endpoint).host,n.title="Secure Modal",n.src=et(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,bi(n),document.body.appendChild(n),e(n)}};["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let n of this.messageHandlers.values())n(e)}})}showOverlay(){return Ve(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return Ve(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return Ve(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw No()})}},Ti=bo(_r,{platform:"web",sdkName:"magic-sdk",version:"8.1.1",defaultEndpoint:"https://auth.magic.link/",ViewController:Oi,configureStorage:()=>Ve(void 0,null,function*(){let e=dt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(rr),yield e.setDriver([dt.default.INDEXEDDB,dt.default.LOCALSTORAGE,rr._driver]),e})});export{pn as EthChainType,Pe as Extension,ur as ExtensionError,Qt as ExtensionWarning,Ti as Magic,Oe as MagicIncomingWindowMessage,Ye as MagicOutgoingWindowMessage,H as MagicPayloadMethod,Ke as RPCError,vt as RPCErrorCode,Ee as SDKError,ge as SDKErrorCode,yt as SDKWarning,tt as SDKWarningCode,xo as isPromiEvent};

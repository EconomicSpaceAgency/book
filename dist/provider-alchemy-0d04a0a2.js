var h=Object.defineProperty;var p=(r,s,e)=>s in r?h(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var i=(r,s,e)=>(p(r,typeof s!="symbol"?s+"":s,e),e);import{a as d,N as f,F as y}from"./provider-jsonrpc-62e4dd44.js";import{d as w,r as v,b as u,a as R}from"./contract-1c37cfa4.js";const m=new Set;function b(r){m.has(r)||(m.add(r),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${r} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}const a="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function A(r){switch(r){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com"}R(!1,"unsupported network","network",r)}class l extends d{constructor(e,t){e==null&&(e="mainnet");const o=f.from(e);t==null&&(t=a);const n=l.getRequest(o,t);super(n,o,{staticNetwork:o});i(this,"apiKey");w(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch{}return super._getProvider(e)}async _perform(e){if(e.method==="getTransactionResult"){const{trace:t,tx:o}=await v({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(t==null||o==null)return null;let n,c=!1;try{n=t[0].result.output,c=t[0].error==="Reverted"}catch{}if(n)return u(!c,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:o,invocation:null,revert:null}),n;u(!1,"could not parse trace result","BAD_DATA",{value:t})}return await super._perform(e)}isCommunityResource(){return this.apiKey===a}static getRequest(e,t){t==null&&(t=a);const o=new y(`https://${A(e.name)}/v2/${t}`);return o.allowGzip=!0,t===a&&(o.retryFunc=async(n,c,g)=>(b("alchemy"),!0)),o}}export{l as A};

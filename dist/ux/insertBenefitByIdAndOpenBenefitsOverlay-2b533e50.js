import{c as C}from"./closeOpenBenefitAndOpenCongratz-0d87c353.js";import{c as H}from"./copyInvitations-8f6b3ae5.js";import{d as N}from"./downloadInvitations-b2488777.js";import{g as P,u as U,i as D}from"../db/orders-a559436a.js";import{m as A}from"./modifyBenefits-6de5ee72.js";import{b as $,u as G}from"../db/copublishers-5adcc3ec.js";import{b as j}from"./blurAndPreventScrolling-0822e332.js";import{u as q}from"./displayCopublishers-e6892adf.js";import"./openCongratzOverlay-6dc84a1c.js";import"../db/supabase-bcc39e3c.js";function z(){let a=document.getElementById("name"),t=document.getElementById("mailingAddress"),d=document.getElementById("phoneNumber"),l=document.getElementById("detailsError");a.value.trim()||(l.style.display="block"),t.value.trim()||(l.style.display="block"),d.value.trim()||(l.style.display="block")}function F(){let a=document.getElementById("copublisherName"),t=document.getElementById("copublisherError");a.value.trim()||(t.style.display="block")}const te=async function(a){let t=localStorage.getItem("wallet");const d=document.getElementById("benefit1Overlay");d&&(d.style.display="flex");const l=document.getElementById("benefit1OverlayClose");l&&(l.addEventListener("click",function(){C()}),l.style.display="block");const c=document.getElementById("benefit1OverlayContent");if(c){c.innerHTML=a,c.innerHTML+='<button class="aboutOverlayBack" id="benefitOverlayClose">← back</button>';let g=document.getElementById("benefitOverlayClose");g&&g.addEventListener("click",function(){C()});let v=document.getElementById("copyButton"),b=document.getElementById("downloadButton");v&&v.addEventListener("click",function(o){H()}),b&&b.addEventListener("click",function(o){N()}),c.style.display="block",j();let s=document.getElementById("postDeliveryDetails"),u=document.getElementById("name"),m=document.getElementById("mailingAddress"),p=document.getElementById("phoneNumber"),y=document.getElementById("contact"),n=document.getElementById("detailsError");if(s){let o=localStorage.getItem("wallet"),e=await P(o);e&&(console.log("existing order: ",e),s.textContent="Update ➹",u.value=e.name,m.value=e.mailing_address,p.value=e.phone_number,y.value=e.contact),s.addEventListener("click",async function(w){n.style.display="none",z(),e?await U(u.value.trim(),m.value.trim(),p.value.trim(),y.value.trim(),localStorage.getItem("wallet"))==null?s.textContent="Thank you!":(n.innerHTML="It seems there is an issue with the delivery, please contact us!",n.style.display="block"):await D(u.value.trim(),m.value.trim(),p.value.trim(),y.value.trim(),localStorage.getItem("wallet"))==null?s.textContent="Thank you!":(n.innerHTML="It seems there is an issue with the delivery, please contact us!",n.style.display="block")})}let i=document.getElementById("postPublisherButton");if(i){let o=document.getElementById("copublisherName"),e=await $(t);console.log("Is it existing copublisher?",e),i&&(e?(i.innerHTML="Update ➹",o.value=e.name):i.innerHTML="Send ➹");let w=document.getElementById("copublisherError");i&&i.addEventListener("click",async function(O){w.style.display="none",F();let S=o.value;{let f=await G(t,S);f==null?(console.log("copublisherUpdateSuccess",f),i.innerHTML="Updated!",q(t,S)):(n.innerHTML="It seems there is an issue with updating copublisher name, please contact us!",n.style.display="block")}})}let I=document.getElementById("invitation-link1"),B=localStorage.getItem("invitation");B&&I&&(I.innerHTML=B);let r=localStorage.getItem("tokenId"),h=document.getElementById("openSeaLink");if(h&&r){const e=`https://testnets.opensea.io/assets/sepolia/0x3aEa64fD94D8185dF5B0f8da8E313F12951dA848/${r}`;h.innerHTML=e}let E=document.getElementById("ipfsBookDownloadLink"),T="https://ecsa.mypinata.cloud/ipfs/QmZVmHu1gU3nLnoDLLpVPJrXTDBPjeX6opAuTiEZRqrzKz/",M=`protocols-for-postcapitalist-expression_digital-edition_${r}.pdf/`,x="?pinataGatewayToken=P2-9GKFuzl7qRF-jnihYUrTyIgIl5NljE2wygdGPqXEQjupoyLqGiusdhZhfxey2",k=T+M+x;r&&E&&(E.innerHTML=k);let L=document.getElementById("dl");r&&L&&(L.href=k),localStorage.getItem("pbi")==!1&&(console.log("pbi: ",localStorage.getItem("pbi")),A())}};export{te as i};
